"use strict";(self.webpackChunkapiboot_minbox_org=self.webpackChunkapiboot_minbox_org||[]).push([[5627],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>u});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=i.createContext({}),g=function(e){var n=i.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},m=function(e){var n=g(e.components);return i.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},k=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),k=g(t),u=a,s=k["".concat(p,".").concat(u)]||k[u]||d[u]||o;return t?i.createElement(s,r(r({ref:n},m),{},{components:t})):i.createElement(s,r({ref:n},m))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=k;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var g=2;g<o;g++)r[g]=t[g];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}k.displayName="MDXCreateElement"},4428:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>g});var i=t(7462),a=(t(7294),t(3905));const o={title:"\u5206\u5e03\u5f0f\u94fe\u8def\u65e5\u5fd7\u7ec4\u4ef6\uff08\u5ba2\u6237\u7aef\uff09",sidebar_position:9},r="ApiBoot \u96f6\u4fb5\u5165\u3001\u94fe\u8def\u5f0f\u8bf7\u6c42\u65e5\u5fd7\u5206\u6790\u6846\u67b6",l={unversionedId:"components/api-boot-logging",id:"components/api-boot-logging",title:"\u5206\u5e03\u5f0f\u94fe\u8def\u65e5\u5fd7\u7ec4\u4ef6\uff08\u5ba2\u6237\u7aef\uff09",description:"ApiBoot\u63d0\u4f9b\u5355\u5e94\u7528\u3001\u5fae\u670d\u52a1\u5e94\u7528\u4e0b\u7684\u8bf7\u6c42\u65e5\u5fd7\u5206\u6790\u6846\u67b6ApiBoot Logging\uff0c\u7279\u6027\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a",source:"@site/docs/components/api-boot-logging.md",sourceDirName:"components",slug:"/components/api-boot-logging",permalink:"/docs/components/api-boot-logging",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"\u5206\u5e03\u5f0f\u94fe\u8def\u65e5\u5fd7\u7ec4\u4ef6\uff08\u5ba2\u6237\u7aef\uff09",sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"DataBase\u591a\u6570\u636e\u6e90\u81ea\u52a8\u5207\u6362\u7ec4\u4ef6",permalink:"/docs/components/api-boot-datasource-switch"},next:{title:"\u5206\u5e03\u5f0f\u94fe\u8def\u65e5\u5fd7\u7ec4\u4ef6\uff08\u670d\u52a1\u7aef\uff09",permalink:"/docs/components/api-boot-logging-admin"}},p={},g=[{value:"\u67b6\u6784\u8bbe\u8ba1\u56fe",id:"\u67b6\u6784\u8bbe\u8ba1\u56fe",level:2},{value:"1. \u6dfb\u52a0\u4f9d\u8d56\u7ec4\u4ef6",id:"1-\u6dfb\u52a0\u4f9d\u8d56\u7ec4\u4ef6",level:2},{value:"\u5185\u90e8\u5c01\u88c5\u7684\u7ec4\u4ef6",id:"\u5185\u90e8\u5c01\u88c5\u7684\u7ec4\u4ef6",level:3},{value:"2. \u4fee\u6539\u91c7\u96c6\u65e5\u5fd7\u8def\u5f84\u524d\u7f00",id:"2-\u4fee\u6539\u91c7\u96c6\u65e5\u5fd7\u8def\u5f84\u524d\u7f00",level:2},{value:"3. \u6392\u9664\u4e0d\u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84",id:"3-\u6392\u9664\u4e0d\u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84",level:2},{value:"4. \u4fee\u6539\u65e5\u5fd7\u7b49\u7ea7",id:"4-\u4fee\u6539\u65e5\u5fd7\u7b49\u7ea7",level:2},{value:"5. \u7f8e\u5316\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\u4fe1\u606f",id:"5-\u7f8e\u5316\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\u4fe1\u606f",level:2},{value:"6. \u65e5\u5fd7\u4e0a\u62a5\u65b9\u5f0f",id:"6-\u65e5\u5fd7\u4e0a\u62a5\u65b9\u5f0f",level:2},{value:"6.1 just\u65b9\u5f0f",id:"61-just\u65b9\u5f0f",level:3},{value:"6.2 timing\u65b9\u5f0f",id:"62-timing\u65b9\u5f0f",level:3},{value:"6.2.1 \u4fee\u6539\u4e0a\u62a5\u95f4\u9694\u65f6\u95f4",id:"621-\u4fee\u6539\u4e0a\u62a5\u95f4\u9694\u65f6\u95f4",level:4},{value:"6.2.2 \u4fee\u6539\u6bcf\u6b21\u4e0a\u62a5\u6761\u6570",id:"622-\u4fee\u6539\u6bcf\u6b21\u4e0a\u62a5\u6761\u6570",level:4},{value:"7. \u65e5\u5fd7\u4e0a\u62a5\u5230\u6307\u5b9aAdmin",id:"7-\u65e5\u5fd7\u4e0a\u62a5\u5230\u6307\u5b9aadmin",level:2},{value:"8. \u65e5\u5fd7\u4e0a\u62a5\u5230\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3Admin",id:"8-\u65e5\u5fd7\u4e0a\u62a5\u5230\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3admin",level:2},{value:"9. \u65e5\u5fd7\u7f13\u5b58",id:"9-\u65e5\u5fd7\u7f13\u5b58",level:2},{value:"10. \u652f\u6301SpringSecurity\u5b89\u5168\u4e0a\u62a5\u65e5\u5fd7",id:"10-\u652f\u6301springsecurity\u5b89\u5168\u4e0a\u62a5\u65e5\u5fd7",level:2},{value:"10.1 \u6307\u5b9aAdmin\u7684\u5b89\u5168\u914d\u7f6e",id:"101-\u6307\u5b9aadmin\u7684\u5b89\u5168\u914d\u7f6e",level:3},{value:"10.2 \u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3Admin\u7684\u5b89\u5168\u914d\u7f6e",id:"102-\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3admin\u7684\u5b89\u5168\u914d\u7f6e",level:3},{value:"11. \u65e5\u5fd7\u901a\u77e5",id:"11-\u65e5\u5fd7\u901a\u77e5",level:2},{value:"12. \u65e0\u7f1d\u652f\u6301Openfeign",id:"12-\u65e0\u7f1d\u652f\u6301openfeign",level:2},{value:"13. GlobalLogging",id:"13-globallogging",level:2},{value:"13.1 Debug\u7b49\u7ea7\u65e5\u5fd7",id:"131-debug\u7b49\u7ea7\u65e5\u5fd7",level:3},{value:"13.2 Info\u7b49\u7ea7\u65e5\u5fd7",id:"132-info\u7b49\u7ea7\u65e5\u5fd7",level:3},{value:"13.3 Error\u7b49\u7ea7\u65e5\u5fd7",id:"133-error\u7b49\u7ea7\u65e5\u5fd7",level:3},{value:"13.4 \u5f02\u5e38\u5806\u6808\u4fe1\u606f",id:"134-\u5f02\u5e38\u5806\u6808\u4fe1\u606f",level:3}],m={toc:g};function d(e){let{components:n,...o}=e;return(0,a.kt)("wrapper",(0,i.Z)({},m,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"apiboot-\u96f6\u4fb5\u5165\u94fe\u8def\u5f0f\u8bf7\u6c42\u65e5\u5fd7\u5206\u6790\u6846\u67b6"},"ApiBoot \u96f6\u4fb5\u5165\u3001\u94fe\u8def\u5f0f\u8bf7\u6c42\u65e5\u5fd7\u5206\u6790\u6846\u67b6"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot"),"\u63d0\u4f9b\u5355\u5e94\u7528\u3001\u5fae\u670d\u52a1\u5e94\u7528\u4e0b\u7684\u8bf7\u6c42\u65e5\u5fd7\u5206\u6790\u6846\u67b6",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\uff0c\u7279\u6027\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u94fe\u8def"),"\uff1a\u4e3a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u751f\u6210\u4e00\u4e2a\u94fe\u8def\u7684\u5355\u6761\u6216\u8005\u591a\u6761\u8bf7\u6c42\u65e5\u5fd7\u4fe1\u606f\uff0c\u7cbe\u51c6\u5b9a\u4f4d\u7a0b\u5e8f\u51fa\u73b0\u95ee\u9898\u7684\u4f4d\u7f6e\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u8017\u65f6"),"\uff1a\u53ef\u4ee5\u5206\u6790\u51fa\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u7684\u8017\u65f6\uff0c\u6539\u5584\u670d\u52a1\u7684\u6027\u80fd\u74f6\u9888"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u5f02\u5e38\u4fe1\u606f"),"\uff1a\u8bf7\u6c42\u9047\u5230\u5f02\u5e38\uff0c\u63d0\u4f9b\u8bf7\u6c42\u65e5\u5fd7\u7684\u5f02\u5e38\u5806\u6808\u4fe1\u606f\u8bb0\u5f55"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u8bf7\u6c42\u53c2\u6570"),"\uff1a\u53ef\u4ee5\u83b7\u53d6",(0,a.kt)("inlineCode",{parentName:"li"},"RequestBody"),"\u3001",(0,a.kt)("inlineCode",{parentName:"li"},"PathParam"),"\u4e24\u79cd\u65b9\u5f0f\u7684\u53c2\u6570"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u54cd\u5e94\u5185\u5bb9"),"\uff1a\u53ef\u4ee5\u83b7\u53d6\u672c\u6b21\u8bf7\u6c42\u54cd\u5e94\u7684\u5185\u5bb9\u4fe1\u606f\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u670d\u52a1\u4fe1\u606f"),"\uff1a\u53ef\u83b7\u53d6\u63d0\u4f9b\u670d\u52a1\u7684ID\u3001IP\u3001Port\u7b49\u4fe1\u606f\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u5f02\u6b65\u901a\u77e5"),"\uff1a\u8bf7\u6c42\u65e5\u5fd7\u6570\u636e\u91c7\u96c6\u540e\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"li"},"Event/Listener"),"\u65b9\u5f0f\u5f02\u6b65\u901a\u77e5\u7ed9",(0,a.kt)("inlineCode",{parentName:"li"},"RPC"),"\u3001",(0,a.kt)("inlineCode",{parentName:"li"},"MQ"),"\u3001",(0,a.kt)("inlineCode",{parentName:"li"},"REST"),"\u3001",(0,a.kt)("inlineCode",{parentName:"li"},"Local"),"\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\u6570\u636e\u5206\u6790"),"\uff1a\u9608\u503c\u8b66\u544a\u3001\u5f02\u5e38\u901a\u77e5\u7b49\uff08\u77ed\u4fe1\u3001\u90ae\u4ef6\u7b49\u65b9\u5f0f\uff0c2.1.1.RELEASE\u7248\u672c\u672a\u5b9e\u73b0.\uff09")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u90e8\u91c7\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"\u62e6\u622a\u5668"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"Filter"),"\u7ec4\u5408\u5b8c\u6210\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c\u3002"),(0,a.kt)("ol",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u4e00\u4e2a\u8bf7\u6c42\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"header"),"\u4fe1\u606f\u5185\u5305\u542b",(0,a.kt)("inlineCode",{parentName:"li"},"traceId\uff08\u94fe\u8defID\uff09"),"\u5219\u52a0\u5165\u8be5\u94fe\u8def\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u751f\u6210\u65b0\u7684\u94fe\u8def\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u4e00\u4e2a\u8bf7\u6c42\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"header"),"\u4fe1\u606f\u5185\u5305\u542b",(0,a.kt)("inlineCode",{parentName:"li"},"spanId\uff08\u8de8\u5ea6ID\uff09"),"\uff0c\u5219\u4f7f\u7528\u8be5",(0,a.kt)("inlineCode",{parentName:"li"},"spanId"),"\u4f5c\u4e3a",(0,a.kt)("inlineCode",{parentName:"li"},"parent spanId"),"\uff0c\u5bf9\u4e24\u4e2a\u8bf7\u6c42\u8fdb\u884c\u4e0a\u4e0b\u7ea7\u5173\u8054\u3002"))),(0,a.kt)("h2",{id:"\u67b6\u6784\u8bbe\u8ba1\u56fe"},"\u67b6\u6784\u8bbe\u8ba1\u56fe"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"ApiBoot Logging\u67b6\u6784\u8bbe\u8ba1\u56fe",src:t(7942).Z,width:"1307",height:"738"})),(0,a.kt)("h2",{id:"1-\u6dfb\u52a0\u4f9d\u8d56\u7ec4\u4ef6"},"1. \u6dfb\u52a0\u4f9d\u8d56\u7ec4\u4ef6"),(0,a.kt)("p",null,"\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"pom.xml"),"\u914d\u7f6e\u6587\u4ef6\u5185\u6dfb\u52a0\u4f9d\u8d56\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--ApiBoot Logging--\x3e\n<dependency>\n    <groupId>org.minbox.framework</groupId>\n    <artifactId>api-boot-starter-logging</artifactId>\n</dependency>\n")),(0,a.kt)("h3",{id:"\u5185\u90e8\u5c01\u88c5\u7684\u7ec4\u4ef6"},"\u5185\u90e8\u5c01\u88c5\u7684\u7ec4\u4ef6"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot"),"\u4ece",(0,a.kt)("inlineCode",{parentName:"p"},"2.1.3.RELEASE"),"\u7248\u672c\u5f00\u59cb\u9646\u7eed\u4f1a\u5c06",(0,a.kt)("inlineCode",{parentName:"p"},"api-boot-plugins"),"\u6a21\u5757\u4e0b\u7684\u7ec4\u4ef6\u4ece",(0,a.kt)("inlineCode",{parentName:"p"},"api-boot"),"\u9879\u76ee\u5206\u79bb\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"minbox-projects"),"\u5f00\u6e90\u7ec4\u7ec7\u5185\u4f5c\u4e3a\u72ec\u7acb\u7684\u9879\u76ee\u8fdb\u884c\u5347\u7ea7\u7ef4\u62a4\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u90e8\u901a\u8fc7\u5c01\u88c5",(0,a.kt)("inlineCode",{parentName:"p"},"minbox-projects/minbox-logging"),"\u7ec4\u4ef6\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"minbox-logging-client"),"\u5b9e\u73b0\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"minbox-logging"),"\u6e90\u7801\u5730\u5740\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/minbox-projects/minbox-logging"},"https://gitee.com/minbox-projects/minbox-logging"))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a\u5982\u679c\u672a\u6dfb\u52a0",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot"),"\u7248\u672c\u4f9d\u8d56\uff0c\u8bf7\u8bbf\u95ee",(0,a.kt)("a",{parentName:"p",href:"/docs/out-box/version-rely"},"\u7248\u672c\u4f9d\u8d56"),"\u67e5\u770b\u6dfb\u52a0\u65b9\u5f0f\u3002")),(0,a.kt)("h2",{id:"2-\u4fee\u6539\u91c7\u96c6\u65e5\u5fd7\u8def\u5f84\u524d\u7f00"},"2. \u4fee\u6539\u91c7\u96c6\u65e5\u5fd7\u8def\u5f84\u524d\u7f00"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u9ed8\u8ba4\u91c7\u96c6",(0,a.kt)("inlineCode",{parentName:"p"},"/**"),"\u4e0b\u7684\u6240\u6709\u8bf7\u6c42\u8def\u5f84\uff0c\u901a\u8fc7\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"application.yml"),"\u914d\u7f6e\u6765\u53d8\u66f4\u91c7\u96c6\u65e5\u5fd7\u8def\u5f84\u7684\u524d\u7f00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      # \u4fee\u6539\u65e5\u5fd7\u8def\u5f84\u524d\u7f00\uff0c\u53ef\u914d\u7f6e\u591a\u4e2a\n      logging-path-prefix:\n        - /user/**\n        - /order/**\n")),(0,a.kt)("p",null,"\u5728\u4e0a\u9762\u914d\u7f6e\u4e2d\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u53ea\u4f1a\u91c7\u96c6",(0,a.kt)("inlineCode",{parentName:"p"},"/user/**"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"/order/**"),"\u4e0b\u6240\u6709\u8def\u5f84\u7684\u8bf7\u6c42\uff0c\u5e76\u5c06\u65e5\u5fd7\u4e0a\u62a5\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging Admin"),"\u3002"),(0,a.kt)("h2",{id:"3-\u6392\u9664\u4e0d\u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84"},"3. \u6392\u9664\u4e0d\u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e9b\u8def\u5f84\u7684\u8bf7\u6c42\u65e5\u5fd7\u4e0d\u8fdb\u884c\u91c7\u96c6\u3001\u4e0a\u62a5\uff0c\u6bd4\u5982\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"/actuator/health"),"\uff0c\u901a\u8fc7\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"application.yml"),"\u914d\u7f6e\u6765\u6392\u9664\u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      # \u6392\u9664\u91c7\u96c6\u8bf7\u6c42\u65e5\u5fd7\u7684\u8def\u5f84\u5217\u8868\n      ignore-paths:\n        - /actuator/health\n")),(0,a.kt)("h2",{id:"4-\u4fee\u6539\u65e5\u5fd7\u7b49\u7ea7"},"4. \u4fee\u6539\u65e5\u5fd7\u7b49\u7ea7"),(0,a.kt)("p",null,"\u5982\u679c\u60f3\u8ba9",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\uff0c\u9700\u8981\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"application.yml"),"\u914d\u7f6e\u6587\u4ef6\u5185\u7684\u65e5\u5fd7\u7b49\u7ea7\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"logging:\n  level:\n    org.minbox.framework.api.boot.plugin.logging: debug\n")),(0,a.kt)("h2",{id:"5-\u7f8e\u5316\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\u4fe1\u606f"},"5. \u7f8e\u5316\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\u4fe1\u606f"),(0,a.kt)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u67e5\u770b\u63a7\u5236\u53f0\u6253\u5370\u7684\u8bf7\u6c42\u65e5\u5fd7\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u652f\u6301\u7f8e\u5316\u65e5\u5fd7",(0,a.kt)("inlineCode",{parentName:"p"},"json"),"\u4fe1\u606f\uff0c\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      format-console-log-json: true\n")),(0,a.kt)("p",null,"\u6548\u679c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'2019-07-24 12:56:11.231 DEBUG 3833 --- [nio-8080-exec-2] f.a.b.p.l.n.ApiBootLoggingNoticeListener : Request Uri\uff1a/index\uff0c Logging\uff1a\n{\n    "endTime":1563944171115,\n    "httpStatus":200,\n    "requestBody":"{\\n\\t\\"name\\":\\"\u6d4b\u8bd5\\",\\n\\t\\"email\\":\\"jnyuqy@gmail.com\\"\\n}",\n    "requestHeaders":{\n        "accept":"*/*",\n        "accept-encoding":"gzip, deflate",\n        "cache-control":"no-cache",\n        "connection":"keep-alive",\n        "content-length":"52",\n        "content-type":"application/json",\n        "cookie":"JSESSIONID=8E206A652D76A5DF1775FC8988549DF4",\n        "host":"localhost:8080",\n        "postman-token":"cc60ceb7-32de-46f1-a7a4-86d694edd073",\n        "user-agent":"PostmanRuntime/7.15.2"\n    },\n    "requestIp":"0:0:0:0:0:0:0:1",\n    "requestMethod":"POST",\n    "requestUri":"/index",\n    "responseBody":"\u6d4b\u8bd5",\n    "responseHeaders":{},\n    "serviceId":"api-boot-sample-logging",\n    "serviceIp":"192.168.10.156",\n    "servicePort":"8080",\n    "spanId":"81c0016e-9bf7-4e86-bcad-98574f0df14c",\n    "startTime":1563944171049,\n    "timeConsuming":66,\n    "traceId":"409b6f2c-f70a-4648-9673-915534bc5aa9"\n}\n')),(0,a.kt)("h2",{id:"6-\u65e5\u5fd7\u4e0a\u62a5\u65b9\u5f0f"},"6. \u65e5\u5fd7\u4e0a\u62a5\u65b9\u5f0f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u90e8\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e0a\u62a5\u65b9\u5f0f\uff0c\u5206\u522b\u662f",(0,a.kt)("inlineCode",{parentName:"p"},"just"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"timing"),"\u3002"),(0,a.kt)("h3",{id:"61-just\u65b9\u5f0f"},"6.1 just\u65b9\u5f0f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"just"),"\u987e\u540d\u601d\u4e49\u662f\u76f4\u63a5\u65b9\u5f0f\u4e0a\u62a5\uff0c\u4e5f\u662f",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u9ed8\u8ba4\u7684\u65b9\u5f0f\uff0c\u5f53\u4e00\u4e2a\u8bf7\u6c42\u65e5\u5fd7\u4ea7\u751f\u4e4b\u540e\u4f1a",(0,a.kt)("strong",{parentName:"p"},"\u5b9e\u65f6\u4e0a\u62a5"),"\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\uff0c\u5229\u5f0a\u5206\u6790\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f18\u70b9",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u6570\u636e\u5206\u6790\u5ef6\u8fdf\u4f4e"),(0,a.kt)("li",{parentName:"ul"},"\u63d0\u9ad8\u6570\u636e\u6709\u6548\u6027\uff0c\u9632\u6b62\u4e22\u5931"))),(0,a.kt)("li",{parentName:"ul"},"\u5f0a\u7aef",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u589e\u52a0",(0,a.kt)("inlineCode",{parentName:"li"},"Logging Admin"),"\u8bbf\u95ee\u538b\u529b")))),(0,a.kt)("h3",{id:"62-timing\u65b9\u5f0f"},"6.2 timing\u65b9\u5f0f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"timing"),"\u65b9\u5f0f\u662f\u5b9a\u65f6\u4e0a\u62a5\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u901a\u8fc7\u914d\u7f6e\u53c2\u6570",(0,a.kt)("inlineCode",{parentName:"p"},"api.boot.logging.report-away=timing"),"\u542f\u7528\uff0c\u9ed8\u8ba4",(0,a.kt)("strong",{parentName:"p"},"\u95f4\u96945\u79d2"),"\u6267\u884c\u4e00\u6b21\u4e0a\u62a5\uff0c\u6bcf\u6b21\u4e0a\u62a5",(0,a.kt)("strong",{parentName:"p"},"10\u6761"),"\u8bf7\u6c42\u65e5\u5fd7\u3002"),(0,a.kt)("h4",{id:"621-\u4fee\u6539\u4e0a\u62a5\u95f4\u9694\u65f6\u95f4"},"6.2.1 \u4fee\u6539\u4e0a\u62a5\u95f4\u9694\u65f6\u95f4"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u9ed8\u8ba4\u95f4\u9694",(0,a.kt)("inlineCode",{parentName:"p"},"5\u79d2"),"\u53d1\u8d77\u4e00\u6b21\u4e0a\u62a5\u8bf7\u6c42\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\uff0c\u4fee\u6539\u914d\u7f6e\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      # \u4fee\u6539\u6bcf\u95f4\u969410\u79d2\u6267\u884c\u4e00\u6b21\u4e0a\u62a5\u65e5\u5fd7\n      report-interval-second: 10\n")),(0,a.kt)("h4",{id:"622-\u4fee\u6539\u6bcf\u6b21\u4e0a\u62a5\u6761\u6570"},"6.2.2 \u4fee\u6539\u6bcf\u6b21\u4e0a\u62a5\u6761\u6570"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u9ed8\u8ba4\u6bcf\u6b21\u53d1\u9001\u7f13\u5b58\u5185\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"10\u6761"),"\u65e5\u5fd7\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\uff0c\u4fee\u6539\u914d\u7f6e\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      # \u4fee\u6539\u6bcf\u6b21\u4e0a\u62a52\u6761\u8bf7\u6c42\u65e5\u5fd7\n      number-of-request-log: 2\n")),(0,a.kt)("h2",{id:"7-\u65e5\u5fd7\u4e0a\u62a5\u5230\u6307\u5b9aadmin"},"7. \u65e5\u5fd7\u4e0a\u62a5\u5230\u6307\u5b9aAdmin"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging")," \u652f\u6301\u4e0a\u62a5\u8bf7\u6c42\u65e5\u5fd7\u5230\u6307\u5b9a",(0,a.kt)("inlineCode",{parentName:"p"},"Admin"),"\u670d\u52a1\u8282\u70b9\uff0c\u914d\u7f6e\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      admin:\n        # Logging Admin \u670d\u52a1\u5730\u5740\n        server-address: 127.0.0.1:9090\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\u670d\u52a1\u5730\u5740\u4e0d\u9700\u8981\u914d\u7f6e",(0,a.kt)("inlineCode",{parentName:"p"},"http://"),"\u8def\u5f84\u524d\u7f00\u3002")),(0,a.kt)("h2",{id:"8-\u65e5\u5fd7\u4e0a\u62a5\u5230\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3admin"},"8. \u65e5\u5fd7\u4e0a\u62a5\u5230\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3Admin"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u652f\u6301\u4ece",(0,a.kt)("inlineCode",{parentName:"p"},"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\uff08Eureka Server\u3001Nacos Discovery\u3001Consul...\uff09"),"\u4e2d\u83b7\u53d6\u6307\u5b9a",(0,a.kt)("inlineCode",{parentName:"p"},"serviceID"),"\u7684\u670d\u52a1\u5217\u8868\uff0c\u5e76\u4e14\u81ea\u52a8\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"LoadBalance"),"\u65b9\u5f0f\u4e0a\u62a5\u8bf7\u6c42\u65e5\u5fd7\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      discovery:\n        # Logging Admin ServiceID\n        service-id: sample-logging-admin\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin ServiceID"),"\u5bf9\u5e94",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\u670d\u52a1\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"spring.application.name"),"\u5c5e\u6027\u914d\u7f6e\u3002")),(0,a.kt)("h2",{id:"9-\u65e5\u5fd7\u7f13\u5b58"},"9. \u65e5\u5fd7\u7f13\u5b58"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u90e8\u9ed8\u8ba4\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"memory\uff08\u5185\u5b58\u65b9\u5f0f\uff09"),"\u8fdb\u884c\u7f13\u5b58\u8bf7\u6c42\u65e5\u5fd7\uff0c\u76ee\u524d\u7248\u672c\u65e0\u6cd5\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"\u7f13\u5b58\u65b9\u5f0f"),"\u3002"),(0,a.kt)("h2",{id:"10-\u652f\u6301springsecurity\u5b89\u5168\u4e0a\u62a5\u65e5\u5fd7"},"10. \u652f\u6301SpringSecurity\u5b89\u5168\u4e0a\u62a5\u65e5\u5fd7"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"\u5b89\u5168\u6027"),"\u662f\u65e5\u5fd7\u4e0a\u62a5\u7684\u57fa\u7840\u80fd\u529b\u4e4b\u4e00\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u5185\u90e8\u96c6\u6210",(0,a.kt)("inlineCode",{parentName:"p"},"Spring Security"),"\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"Basic"),"\u5b89\u5168\u8ba4\u8bc1\u65b9\u5f0f\u6765\u5b8c\u6210\u4e0a\u62a5\u9274\u6743\u3002"),(0,a.kt)("h3",{id:"101-\u6307\u5b9aadmin\u7684\u5b89\u5168\u914d\u7f6e"},"10.1 \u6307\u5b9aAdmin\u7684\u5b89\u5168\u914d\u7f6e"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u6307\u5b9a",(0,a.kt)("inlineCode",{parentName:"p"},"Admin"),"\u670d\u52a1\u8282\u70b9\u7684\u65b9\u5f0f\u8ddf",(0,a.kt)("inlineCode",{parentName:"p"},"Eureka Client ServerUrl"),"\u7c7b\u4f3c\uff0c\u5728\u8def\u5f84\u4e0a\u6dfb\u52a0",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\u914d\u7f6e\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"Spring Security"),"\u7528\u6237\u540d\u5bc6\u7801\uff0c\u914d\u7f6e\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      admin:\n        # \u7528\u6237\u540d\uff1auser\uff0c\u5bc6\u7801\uff1a123456\n        server-address: user:123456@127.0.0.1:9090\n")),(0,a.kt)("h3",{id:"102-\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3admin\u7684\u5b89\u5168\u914d\u7f6e"},"10.2 \u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3Admin\u7684\u5b89\u5168\u914d\u7f6e"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3"),"\u65b9\u5f0f\u914d\u7f6e",(0,a.kt)("inlineCode",{parentName:"p"},"Logging Admin"),"\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"Spring Security"),"\u7528\u6237\u540d\u3001\u5bc6\u7801\u65b9\u5f0f\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      discovery:\n        # Logging Admin ServiceID\n        service-id: sample-logging-admin\n        # \u7528\u6237\u540d\n        username: user\n        # \u5bc6\u7801\n        password: 123456\n")),(0,a.kt)("h2",{id:"11-\u65e5\u5fd7\u901a\u77e5"},"11. \u65e5\u5fd7\u901a\u77e5"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u63d0\u4f9b\u4e86\u65e5\u5fd7\u7684\u901a\u77e5\u529f\u80fd\uff0c\u5229\u7528\u8be5\u529f\u80fd\u53ef\u4ee5\u5bf9\u6bcf\u4e00\u6761\u8bf7\u6c42\u65e5\u5fd7\u8fdb\u884c\u8f93\u51fa\u3001\u5b58\u50a8\u3001\u5206\u6790\u7b49\uff0c\u901a\u8fc7\u5b9e\u73b0",(0,a.kt)("inlineCode",{parentName:"p"},"LoggingNotice"),"\u63a5\u53e3\u4f7f\u7528\u901a\u77e5\u529f\u80fd\uff0c\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"@Component\npublic class LocalNoticeSample implements LoggingNotice {\n    /**\n     * order \u503c\u8d8a\u5c0f\u6267\u884c\u8d8a\u9760\u524d\n     *\n     * @return\n     */\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n\n    /**\n     * \u8bf7\u6c42\u65e5\u5fd7\u901a\u77e5\u6267\u884c\u65b9\u6cd5\n     * MinBoxLog\u4e3a\u4e00\u6b21\u8bf7\u6c42\u65e5\u5fd7\u5bf9\u8c61\u57fa\u672c\u4fe1\u606f\n     *\n     * @param minBoxLog ApiBoot Log\n     */\n    @Override\n    public void notice(MinBoxLog minBoxLog) {\n        System.out.println(minBoxLog);\n    }\n}\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u63d0\u4f9b\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"LoggingNotice"),"\u652f\u6301",(0,a.kt)("strong",{parentName:"p"},"\u591a\u4e2a\u5b9e\u73b0\u7c7b\u914d\u7f6e"),"\uff0c\u6267\u884c\u987a\u5e8f\u6839\u636e",(0,a.kt)("inlineCode",{parentName:"p"},"getOrder()"),"\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u6765\u5b9a\u4e49\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"getOrder()"),"\u65b9\u6cd5\u8fd4\u56de",(0,a.kt)("strong",{parentName:"p"},"\u503c\u8d8a\u5c0f\u8d8a\u9760\u524d\u6267\u884c"),"\u3002\n",(0,a.kt)("inlineCode",{parentName:"p"},"MinBoxLog"),"\u5bf9\u8c61\u5b9a\u4e49\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"\n/**\n * ApiBoot Log Object\n *\n * @author\uff1a\u6052\u5b87\u5c11\u5e74 - \u4e8e\u8d77\u5b87\n */\n@Data\npublic class MinBoxLog implements Serializable {\n    /**\n     * trace id\n     */\n    private String traceId;\n    /**\n     * span id\n     */\n    private String spanId;\n    /**\n     * parent span id\n     */\n    private String parentSpanId;\n    /**\n     * request uri\n     */\n    private String requestUri;\n    /**\n     * request method\n     */\n    private String requestMethod;\n    /**\n     * http status code\n     */\n    private int httpStatus;\n    /**\n     * request ip\n     */\n    private String requestIp;\n    /**\n     * service ip address\n     */\n    private String serviceIp;\n    /**\n     * service port\n     */\n    private String servicePort;\n    /**\n     * start time\n     */\n    private Long startTime;\n    /**\n     * end time\n     */\n    private Long endTime;\n    /**\n     * this request time consuming\n     */\n    private long timeConsuming;\n    /**\n     * service id\n     */\n    private String serviceId;\n    /**\n     * request headers\n     */\n    private Map<String, String> requestHeaders;\n    /**\n     * request param\n     */\n    private String requestParam;\n    /**\n     * request body\n     */\n    private String requestBody;\n    /**\n     * response headers\n     */\n    private Map<String, String> responseHeaders;\n    /**\n     * response body\n     */\n    private String responseBody;\n    /**\n     * exception stack\n     */\n    private String exceptionStack;\n    /**\n     * Global method log list\n     */\n    private List<GlobalLog> globalLogs;\n}\n")),(0,a.kt)("h2",{id:"12-\u65e0\u7f1d\u652f\u6301openfeign"},"12. \u65e0\u7f1d\u652f\u6301Openfeign"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u652f\u6301",(0,a.kt)("inlineCode",{parentName:"p"},"Spring Cloud Openfeign"),"\u7684\u65b9\u5f0f\u8bf7\u6c42\uff0c\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"SpringCloud"),"\u5fae\u670d\u52a1\u5e94\u7528\u4e2d\u5982\u679c\u4f60\u53d1\u8d77\u4e00\u4e2a",(0,a.kt)("inlineCode",{parentName:"p"},"Http"),"\u8bf7\u6c42\uff0c\u800c\u8be5\u8bf7\u6c42\u5728\u670d\u52a1\u7aef\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"openfeign"),"\u8bbf\u95ee\u5176\u4ed6\u670d\u52a1\uff0c\u8fd9\u65f6",(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u4f1a\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"openfeign"),"\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"Interceptor"),"\u643a\u5e26",(0,a.kt)("inlineCode",{parentName:"p"},"TraceId"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"SpanId"),"\u5230\u4e0b\u4e00\u4e2a\u670d\u52a1\uff0c\u5b8c\u6210\u8bf7\u6c42\u65e5\u5fd7\u7684\u94fe\u8def\u4fe1\u606f\u900f\u4f20\u3002"),(0,a.kt)("h2",{id:"13-globallogging"},"13. GlobalLogging"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GlobalLogging"),"\u662f\u5168\u5c40\u65e5\u5fd7\uff0c\u53ef\u4ee5\u7528\u6765\u91c7\u96c6\u4e1a\u52a1\u4ee3\u7801\u4e2d\u7684\u4e0d\u540c\u7b49\u7ea7\u7684\u65e5\u5fd7\uff0c\u652f\u6301\u91c7\u96c6",(0,a.kt)("inlineCode",{parentName:"p"},"\u5f02\u5e38\u5806\u6808"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"\u65e5\u5fd7\u4ea7\u751f\u7c7b"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"\u65e5\u5fd7\u4ea7\u751f\u6e90\u7801\u884c"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"\u65e5\u5fd7\u4ea7\u751f\u65b9\u6cd5"),"\u7b49\u4fe1\u606f\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ApiBoot Logging"),"\u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u7528\u4e8e\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"GlobalLogging"),"\u7684\u4e34\u65f6\u5b58\u50a8\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"\u5185\u5b58\u65b9\u5f0f(memory)"),"\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"api:\n  boot:\n    logging:\n      global-logging-storage-away: memory\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u8be5\u914d\u7f6e\u76ee\u524d\u53ea\u63d0\u4f9b\u4e86\u8fd9\u4e00\u79cd\u5b58\u50a8\u65b9\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef\uff0c\u53ef\u4ee5\u4e0d\u7528\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"application.yml"),"\u6587\u4ef6\u5185\u6dfb\u52a0\u3002")),(0,a.kt)("h3",{id:"131-debug\u7b49\u7ea7\u65e5\u5fd7"},"13.1 Debug\u7b49\u7ea7\u65e5\u5fd7"),(0,a.kt)("p",null,"\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"GlobalLogging"),"\u63d0\u4f9b\u4e86\u4e24\u79cd",(0,a.kt)("inlineCode",{parentName:"p"},"debug"),"\u65b9\u6cd5\uff0c\u65b9\u6cd5\u5b9a\u4e49\u6e90\u7801\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"/**\n  * Collect Debug Level Logs\n  *\n  * @param msg log content\n  */\nvoid debug(String msg);\n\n/**\n  * Collect Debug Level Logs\n  *\n  * @param format    Unformatted log content\n  * @param arguments List of parameters corresponding to log content\n  */\nvoid debug(String format, Object... arguments);\n")),(0,a.kt)("p",null,"\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Autowired\nprivate GlobalLogging logging;\n\n// debug(String msg)\nlogging.debug("\u8fd9\u662f\u4e00\u4e2adebug\u7b49\u7ea7\u7684\u65e5\u5fd7");\n\n// debug(String format,Object... arguments)\nlogging.debug("\u8fd9\u662f\u4e00\u4e2adebug\u7b49\u7ea7\u7684\u65e5\u5fd7\uff0c\u6267\u884c\u65f6\u95f4\uff1a{}" , System.currentTimeMillis());\n\n// debug(String format, Object... arguments)\nlogging.debug("\u591a\u53c2\u6570\u6f14\u793a\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u503c\uff1a{}\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u503c\uff1a{}\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u503c\uff1a{}",16.7,"b",10);\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u7531\u4e8e",(0,a.kt)("inlineCode",{parentName:"p"},"arguments"),"\u53c2\u6570\u91c7\u7528\u7684\u53ef\u53d8\u957f\u5ea6\u53c2\u6570\u4f20\u9012\uff0c\u6240\u4ee5\u8fd9\u91cc\u5141\u8bb8\u4f20\u9012\u591a\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u586b\u5145",(0,a.kt)("inlineCode",{parentName:"p"},"{}"),"\u5360\u4f4d\u7b26\u7684\u5185\u5bb9\u3002")),(0,a.kt)("h3",{id:"132-info\u7b49\u7ea7\u65e5\u5fd7"},"13.2 Info\u7b49\u7ea7\u65e5\u5fd7"),(0,a.kt)("p",null,"\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"GlobalLogging"),"\u63a5\u53e3\u4e2d\u540c\u6837\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"info"),"\u7ea7\u522b\u7684\u65e5\u5fd7\u91c7\u96c6\u63d0\u4f9b\u4e86\u4e24\u4e2a\u65b9\u6cd5\uff0c\u65b9\u6cd5\u5b9a\u4e49\u6e90\u7801\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"/**\n  * Collect Info Level Logs\n  *\n  * @param msg log content\n  */\nvoid info(String msg);\n\n/**\n  * Collect Info Level Logs\n  *\n  * @param format    Unformatted log content\n  * @param arguments List of parameters corresponding to log content\n  */\nvoid info(String format, Object... arguments);\n")),(0,a.kt)("p",null,"\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Autowired\nprivate GlobalLogging logging;\n\n// info(String msg)\nlogging.info("\u8fd9\u662f\u4e00\u4e2ainfo\u7b49\u7ea7\u7684\u65e5\u5fd7");\n\n// info(String format, Object... arguments)\nlogging.info("\u8fd9\u662f\u4e00\u4e2ainfo\u7b49\u7ea7\u7684\u65e5\u5fd7\uff0c\u8bb0\u5f55\u65f6\u95f4\uff1a{}" , System.currentTimeMillis());\n\n// info(String format, Object... arguments)\nlogging.info("\u591a\u53c2\u6570\u6f14\u793a\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u503c\uff1a{}\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u503c\uff1a{}\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u503c\uff1a{}","a","b",10);\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u7531\u4e8e",(0,a.kt)("inlineCode",{parentName:"p"},"arguments"),"\u53c2\u6570\u91c7\u7528\u7684\u53ef\u53d8\u957f\u5ea6\u53c2\u6570\u4f20\u9012\uff0c\u6240\u4ee5\u8fd9\u91cc\u5141\u8bb8\u4f20\u9012\u591a\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u586b\u5145",(0,a.kt)("inlineCode",{parentName:"p"},"{}"),"\u5360\u4f4d\u7b26\u7684\u5185\u5bb9\u3002")),(0,a.kt)("h3",{id:"133-error\u7b49\u7ea7\u65e5\u5fd7"},"13.3 Error\u7b49\u7ea7\u65e5\u5fd7"),(0,a.kt)("p",null,"\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"GlobalLogging"),"\u63a5\u53e3\u4e2d\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"error"),"\u7b49\u7ea7\u7684\u65e5\u5fd7\u5219\u662f\u63d0\u4f9b\u4e86",(0,a.kt)("inlineCode",{parentName:"p"},"3"),"\u4e2a\u65b9\u6cd5\uff0c\u6bd4",(0,a.kt)("inlineCode",{parentName:"p"},"info/debug"),"\u591a\u51fa\u4e86\u4e00\u4e2a\u91c7\u96c6\u5f02\u5e38\u5806\u6808\u4fe1\u606f\u7684\u65b9\u6cd5\uff0c\u6e90\u7801\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"/**\n  * Collect Error Level Logs\n  *\n  * @param msg log content\n  */\nvoid error(String msg);\n\n/**\n  * Collect Error Level Logs\n  *\n  * @param msg       log content\n  * @param throwable Exception object instance\n  */\nvoid error(String msg, Throwable throwable);\n\n/**\n  * Collect Error Level Logs\n  *\n  * @param format    Unformatted log content\n  * @param arguments List of parameters corresponding to log content\n  */\nvoid error(String format, Object... arguments);\n")),(0,a.kt)("p",null,"\u5176\u4e2d",(0,a.kt)("inlineCode",{parentName:"p"},"error(String msg)"),"\u4ee5\u53ca",(0,a.kt)("inlineCode",{parentName:"p"},"error(String format, Object... arguments)"),"\u65b9\u6cd5\u4f7f\u7528\u65b9\u5f0f\u4e0e",(0,a.kt)("inlineCode",{parentName:"p"},"debug/info"),"\u4e00\u81f4\u3002"),(0,a.kt)("h3",{id:"134-\u5f02\u5e38\u5806\u6808\u4fe1\u606f"},"13.4 \u5f02\u5e38\u5806\u6808\u4fe1\u606f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"/**\n  * Collect Error Level Logs\n  *\n  * @param msg       log content\n  * @param throwable Exception object instance\n  */\nvoid error(String msg, Throwable throwable);\n")),(0,a.kt)("p",null,"\u91c7\u96c6\u5f02\u5e38\u5806\u6808\u4fe1\u606f\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"error"),"\u65b9\u6cd5\uff0c\u9700\u8981\u6211\u4eec\u628a\u5f02\u5e38\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\uff0c\u5728\u5185\u90e8\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"printStackTrace()"),"\u65b9\u6cd5\u8fdb\u884c\u8f6c\u6362\u5806\u6808\u4fe1\u606f\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'try {\n  int a = 5 / 0;\n} catch (Exception e) {\n  logging.error("\u51fa\u73b0\u4e86\u5f02\u5e38.", e);\n}\n')))}d.isMDXComponent=!0},7942:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/apiboot-logging-9d02b25f7a006a3bc4a70ac8b92a5480.png"}}]);